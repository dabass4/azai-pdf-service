<analysis>
The previous AI engineer initiated development of a full-stack timesheet scanning application, integrating FastAPI, React, and MongoDB. The project began with core functionality: scanning timesheets (PDF/JPG), extracting key data using OpenAI Vision API, and a mock submission to Sandata's API. Initial setup involved configuring environment variables and establishing a basic UI. Iterative development followed user requests, enhancing data models and UI to support multiple time entries, then multiple employees per patient, all displayed chronologically. Unit conversion from hours to 15-minute units was implemented, including a rounding rule. Subsequent phases introduced comprehensive patient, employee (with masked SSN), and insurance contract (payer) profiles, featuring detailed CRUD operations and specific Ohio Medicaid services. A manual timesheet editor was added for corrections. The application was also made fully mobile-responsive. The latest feature implemented is a claims management system for Ohio Department of Medicaid submissions, allowing creation of claims linked to patients and payers. The current task is to analyze an Ohio Medicaid EVV data collection PDF for further feature development.
</analysis>

<product_requirements>
The goal is to build a full-stack application for scanning timesheets and depositing data to Sandata's API.
**Core Functionality:**
*   Upload timesheets in PDF or JPG format.
*   Auto-extract key data: employee name, date, time in/out, hours worked, client name, service code, signature.
*   Auto-submit extracted data to Sandata's API (initially mocked).
*   **Feature Enhancements (Implemented):**
    *   Handle multiple date and time entries per timesheet.
    *   Support multiple employee entries for one patient/client.
    *   Arrange all employee time entries chronologically by time and date.
    *   Convert employee hours worked to units (1 unit = 15 minutes).
    *   Implement a rounding exception: time difference > 35 minutes rounds up to 3 units.
    *   Create a comprehensive patient profile (first/last name, sex, DOB, address, Medicaid#, prior auth#, ICD-10, physician name/NPI).
    *   Develop a comprehensive employee profile (personal, contact, employment, emergency contact, certifications, masked SSN).
    *   Provide a manual timesheet editing option for irregularities.
    *   Create a payer section for insurance contracts, allowing multiple insurance types, contract dates, and specific Ohio Department of Medicaid billable services with toggles.
    *   Ensure the application is fully responsive for both phone and web interfaces.
    *   Develop a claims management system to create and submit claims to the Ohio Department of Medicaid, linking patients and payers.
</product_requirements>

<key_technical_concepts>
-   **Full-stack Development**: React (frontend), FastAPI (backend), MongoDB (database).
-   **AI Integration**: OpenAI Vision API (GPT-4V) for document data extraction.
-   **Data Processing**:  and  for PDF to image conversion.
-   **Pydantic**: Data validation for API models and MongoDB.
-   **UI/UX**: Shadcn/UI components, Tailwind CSS, mobile responsiveness,  for toasts.
-   **Deployment**: Kubernetes container environment, Supervisor for service management.
-   **Environment Management**:  files for configuration,  for LLM key handling.
</key_technical_concepts>

<code_architecture>


-   **/app/backend/server.py**:
    -   **Importance**: Main FastAPI application handling all backend logic, API routes, and MongoDB interactions. Defines data models using Pydantic.
    -   **Changes**:
        -   Initial setup for timesheet upload, extraction, and mock Sandata submission.
        -   Integration with  for OpenAI Vision.
        -   Added  functionality to convert PDFs for Vision API.
        -   Modified  and  models to support multiple time entries.
        -   Introduced  model within  for multiple employees per timesheet.
        -   Added  model and CRUD API endpoints for patient management.
        -   Added  model and CRUD API endpoints for employee management (includes SSN masking logic).
        -   Added API endpoints for updating timesheets for the manual editor.
        -   Introduced  and  models with CRUD endpoints for payer management.
        -   Added  and  models with CRUD endpoints for claims management; linked  to  model.

-   **/app/frontend/src/App.js**:
    -   **Importance**: Main React component, manages global state, routing, and renders primary UI elements.
    -   **Changes**:
        -   Initial UI for timesheet upload and display.
        -   Updated to display multiple time entries in a table.
        -   Updated to display multiple employees and their time entries.
        -   Implemented chronological sorting of all time entries regardless of employee.
        -   Integrated hours-to-units conversion, including time-in/time-out calculation and the 35-minute rounding rule.
        -   Added navigation and routes for , , , , and  pages.
        -   Incorporated mobile-responsive navigation (hamburger menu) and component optimization for various screen sizes.
        -   Added Edit buttons to timesheet cards to link to the .

-   **/app/frontend/src/index.js**:
    -   **Importance**: Entry point for the React application.
    -   **Changes**: Integrated the  component for displaying notifications.

-   **/app/frontend/src/App.css**:
    -   **Importance**: Global CSS styles.
    -   **Changes**: Added styles for mobile responsiveness, ensuring UI adapts to different screen sizes.

-   **/app/frontend/src/pages/Patients.js**:
    -   **Importance**: New page for managing patient profiles (create, view, edit, delete).
    -   **Changes**: Created to display patient list, add new patient form, and individual patient profile cards.

-   **/app/frontend/src/pages/Employees.js**:
    -   **Importance**: New page for managing employee profiles (create, view, edit, delete).
    -   **Changes**: Created to display employee list, add new employee form, and individual employee profile cards with masked SSN.

-   **/app/frontend/src/pages/TimesheetEditor.js**:
    -   **Importance**: New page providing a manual interface to edit timesheet data.
    -   **Changes**: Created to allow modification of patient, employee, and time entry details, including adding/deleting entries/employees, with Save/Resubmit options.

-   **/app/frontend/src/pages/Payers.js**:
    -   **Importance**: New page for managing insurance contracts.
    -   **Changes**: Created to display payer contracts, add new contract form with billable services and toggles, and individual contract cards.

-   **/app/frontend/src/pages/Claims.js**:
    -   **Importance**: New page for creating and managing claims.
    -   **Changes**: Created to display claims, add new claim form with patient/payer selection and service line items.
</code_architecture>

<pending_tasks>
-   Detailed analysis and implementation based on the Ohio Medicaid EVV data collection PDF: .
</pending_tasks>

<current_work>
The application currently features a robust timesheet scanning and management system. Users can upload timesheets (PDF/JPG), and the AI extracts detailed information, including multiple time entries and multiple employees per patient. All time entries are displayed chronologically, with hours automatically converted to units (1 unit = 15 minutes), including a rounding rule (times > 35 mins round up to 3 units).

Comprehensive profiles for patients, employees (with SSN masking), and insurance payers (with Ohio Medicaid billable services) have been implemented, including full CRUD functionality. A manual timesheet editor allows users to correct any irregularities before submission. The entire application is fully responsive, supporting seamless use across phones, tablets, and desktop browsers.

Most recently, a claims management system has been added, allowing users to create and submit claims to the Ohio Department of Medicaid. This involves selecting a patient and an insurance payer, defining a service period, and adding service line items. The immediate next step is to integrate specifications from an Ohio Medicaid EVV data collection PDF.
</current_work>

<optional_next_step>
Analyze the Ohio Medicaid EVV data collection PDF to identify and implement required functionality.
</optional_next_step>
